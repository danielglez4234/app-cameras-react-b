{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dgonzalez\\\\Documents\\\\Instalaci\\xF3n conectada\\\\web-cameras\\\\app-cameras-react-b\\\\src\\\\components\\\\HandleDeleteCamera.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Cookies from 'universal-cookie';\nimport loadingSrc from \"../img/loading.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  REACT_APP_SERVICES_IP\n} = process.env;\nconst cookies = new Cookies();\n\nclass HandleDeleteCamera extends Component {\n  constructor() {\n    super();\n\n    this.handleDelete = () => {\n      const _this = this;\n\n      const userID = cookies.get('userID');\n      const queryParams = new URLSearchParams(window.location.search);\n      const idCamera = queryParams.get('id');\n      const typeCam = \"Camera\";\n      const options = {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'session-id': userID\n      };\n      axios.delete(`http://${REACT_APP_SERVICES_IP}:8443/cameras/${idCamera}`, {\n        headers: options\n      }).then(response => {\n        setTimeout(function () {\n          _this.setState({\n            //save the current state of the data\n            loadingDelete: false\n          });\n        }, 1000);\n        console.log('Camera deleted on sever successfully....');\n      }).catch(error => {\n        _this.setState({\n          //save the current state of the data\n          connectionErrorServer: true\n        });\n\n        console.log('Error fetching and parsing data on the ORION context brocker', error);\n      });\n    };\n\n    this.state = {\n      loadingDelete: true,\n      loadingDeleteServer: true,\n      connectionError: false,\n      connectionErrorServer: false\n    };\n  }\n\n  componentDidMount() {\n    this.handleDelete();\n  }\n\n  render() {\n    const error = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message-box message-box-error\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fa fa-ban fa-2x\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"message-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Error:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 52\n        }, this), \" Internal Server Error\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-times fa-2x exit-button \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 23\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 19\n    }, this);\n\n    const success = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message-box message-box-success\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fa fa-check fa-2x\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"message-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Success:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 56\n        }, this), \" Camera deleted correctly\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-times fa-2x exit-button \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 27\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rep_prub_form\",\n      children: this.state.connectionError ? error : this.state.loadingDelete ? /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"loading connection_error\",\n        src: loadingSrc,\n        alt: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 38\n      }, this) : success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default HandleDeleteCamera;","map":{"version":3,"sources":["C:/Users/dgonzalez/Documents/InstalaciÃ³n conectada/web-cameras/app-cameras-react-b/src/components/HandleDeleteCamera.js"],"names":["React","Component","axios","Cookies","REACT_APP_SERVICES_IP","process","env","cookies","HandleDeleteCamera","constructor","handleDelete","_this","userID","get","queryParams","URLSearchParams","window","location","search","idCamera","typeCam","options","delete","headers","then","response","setTimeout","setState","loadingDelete","console","log","catch","error","connectionErrorServer","state","loadingDeleteServer","connectionError","componentDidMount","render","success","loadingSrc"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react';\nimport axios                 from 'axios';\nimport Cookies               from 'universal-cookie';\n\nimport loadingSrc            from '../img/loading.svg';\n\nconst {REACT_APP_SERVICES_IP} = process.env;\nconst cookies = new Cookies();\n\nclass HandleDeleteCamera extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      loadingDelete: true,\n      loadingDeleteServer: true,\n      connectionError: false,\n      connectionErrorServer: false\n    };\n  }\n\n  handleDelete= () => {\n\n    const _this         = this;\n    const userID        = cookies.get('userID');\n    const queryParams   = new URLSearchParams(window.location.search);\n\n    const idCamera      = queryParams.get('id');\n    const typeCam       = \"Camera\";\n\n    const options = {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'session-id': userID\n    };\n\n\n    axios.delete(`http://${REACT_APP_SERVICES_IP}:8443/cameras/${idCamera}`, { headers: options\t})\n      .then(response => {\n        setTimeout(function(){\n        _this.setState({ //save the current state of the data\n          loadingDelete: false\n        });\n      }, 1000);\n        console.log('Camera deleted on sever successfully....');\n      })\n      .catch(error => {\n        _this.setState({ //save the current state of the data\n          connectionErrorServer: true\n        });\n        console.log('Error fetching and parsing data on the ORION context brocker', error);\n      });\n\n\n}\n\n\n  componentDidMount() {\n    this.handleDelete();\n  }\n\n\n\n  render() {\n    const error = <div className=\"message-box message-box-error\">\n                    <i className=\"fa fa-ban fa-2x\"></i>\n                    <span className=\"message-text\"><strong>Error:</strong> Internal Server Error</span>\n                    <a href=\"/\">\n                      <i className=\"fa fa-times fa-2x exit-button \"></i>\n                    </a>\n                  </div>;\n    const success = <div className=\"message-box message-box-success\">\n                        <i className=\"fa fa-check fa-2x\"></i>\n                        <span className=\"message-text\"><strong>Success:</strong> Camera deleted correctly</span>\n                        <a href=\"/\">\n                          <i className=\"fa fa-times fa-2x exit-button \"></i>\n                        </a>\n                      </div>;\n    return (\n      <div className=\"rep_prub_form\">\n\n      { (this.state.connectionError) ? error :\n        (this.state.loadingDelete) ? <img className=\"loading connection_error\" src={ loadingSrc } alt=\"loading\"/> : success }\n\n      </div>\n    );\n  }\n}\n\nexport default HandleDeleteCamera;\n"]},"metadata":{},"sourceType":"module"}