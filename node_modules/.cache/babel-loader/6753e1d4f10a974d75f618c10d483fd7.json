{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dgonzalez\\\\Documents\\\\Instalaci\\xF3n conectada\\\\web-cameras\\\\app-cameras-react-b\\\\src\\\\components\\\\ContainerVideo.js\";\nimport React, { Component } from 'react';\nimport { Consumer } from './context';\nimport * as $ from 'jquery';\nimport noCameaSrc from '../img/noCamera.png';\nimport loadingSrc from \"../img/loading.svg\";\nimport apiNotResponding from '../img/apiNotResponding.png'; // import deleteIcon          from '../img/delete.png';\n\nimport Videos from './Videos';\nimport ConnectionError from './ConnectionError';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ContainerVideo extends Component {\n  constructor() {\n    super();\n\n    this.warningDelete = id => {\n      $('.warning-delete' + id).fadeIn(100);\n      $('.block-area-for-warning-delete').fadeIn(100);\n    };\n\n    this.closeWarningDelete = id => {\n      if (id) {\n        $('.warning-delete' + id).fadeOut(100);\n        $('.block-area-for-warning-delete').fadeOut(100);\n      } else {\n        $('.warning-delete').fadeOut(100);\n        $('.block-area-for-warning-delete').fadeOut(100);\n      }\n    };\n\n    this.showMenuItems = id => {\n      $('.menuCameraItem' + id).toggle();\n      $('.menuVideoCameraButton' + id).toggleClass('border-bottom-left-radius-0 border-top-left-radius-0');\n      $('.cameraButtons' + id).toggleClass('opacity-on-Move-right');\n    };\n\n    this.coverCamera = id => {\n      $('.rep_prub').toggle();\n      $('.coverCameraButtonIcon').toggleClass('cover-rotate-when-clicked');\n      $('.rep_prub' + id).toggleClass('displayBlock width-height-1');\n\n      if ($(\".pnc\" + id).hasClass(\"panoramic\")) {\n        $('.rep_prub' + id).toggleClass('adjust-panoramic');\n      }\n\n      if ($(\".pncHa\" + id).hasClass(\"panoramic\")) {\n        $('.rep_prub' + id).toggleClass('adjust-panoramic-medium');\n      }\n    };\n\n    this.showMoreInfo = id => {\n      $('.rep_prub-info' + id).toggleClass('show-rep_prub-info');\n    };\n\n    this.adjustPanoramic = () => {\n      var imgHTML = $(\".video_streamJPG\");\n\n      for (var i = 0; i < imgHTML.length; i++) {\n        var url = imgHTML.eq(i).attr(\"src\");\n        var img = new Image();\n        var difference = 0;\n        img.src = url;\n\n        img.onload = function () {\n          difference = this.width - this.height;\n\n          if (difference > 300) {\n            var e = i - 1; // console.log(\"i: \" + e + \" html: \" + imgHTML.eq(e).attr(\"src\"));\n\n            imgHTML.eq(e).closest(\".rep_prub\").addClass(\"adjust-panoramic\");\n            $('.rep_prub').addClass('width-height-7').removeClass('width-height-1 width-height-2 width-height-3 width-height-5');\n          }\n        };\n      }\n    };\n\n    this.reloadimageJPG = () => {\n      var count = 0;\n      var imgTag = $(\".video_streamJPG\");\n      var d = new Date();\n      setInterval(function () {\n        if (count === 5) {\n          for (var i = 0; i < imgTag.length; i++) {\n            var url = imgTag.eq(i).attr(\"src\");\n            url = url.slice(0, url.indexOf('?'));\n            imgTag.eq(i).attr(\"src\", url);\n          }\n\n          count = 0;\n        } else {\n          for (var i = 0; i < imgTag.length; i++) {\n            var url = imgTag.eq(i).attr(\"src\");\n            imgTag.eq(i).attr(\"src\", url + \"?\" + d.getTime());\n          }\n\n          count += 1;\n        }\n      }, 60000);\n    };\n\n    this.state = {\n      countVideos: 0 // mapTestId: [\n      //             {id:'1', cameraType:\"static\", url:\"https://atmosportal.gtc.iac.es/webcams/camaraAllSky.jpg\", order: 1},\n      //             {id:'2', cameraType:\"static\", url:\"https://atmosportal.gtc.iac.es/img/lastskycam.jpg\", order: 2},\n      //             {id:'3', cameraType:\"static\", url:\"https://atmosportal.gtc.iac.es/img/lastzenithcam.jpg\", order: 3},\n      //             {id:'4', cameraType:\"static\", url:\"https://atmosportal.gtc.iac.es/webcams/pasillo.jpg\", order: 5},\n      //           ]\n\n    };\n  }\n\n  componentDidMount() {\n    this.reloadimageJPG();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Consumer, {\n      children: context => {\n        function sortJSON(data, key, orden) {\n          return data.sort(function (a, b) {\n            var x = a[key],\n                y = b[key];\n\n            if (orden === 'asc') {\n              return x < y ? -1 : x > y ? 1 : 0;\n            }\n\n            if (orden === 'desc') {\n              return x > y ? -1 : x < y ? 1 : 0;\n            }\n          });\n        }\n\n        let videos;\n        const result = context.idCam; //we save the data in the result variable\n        // const resultStatic = context.staticIdCam;\n        // const result = this.state.mapTestId;\n\n        sortJSON(result, 'order', 'asc');\n\n        if (result === undefined) {\n          videos = /*#__PURE__*/_jsxDEV(ConnectionError, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 20\n          }, this);\n        } else {\n          if (result.length > 0) {\n            // if the results found are greater than 0 the images are displayed\n            videos = result.map(video => /*#__PURE__*/_jsxDEV(Videos, {\n              name: video,\n              warningDelete: this.warningDelete,\n              closeWaringDelete: this.closeWarningDelete,\n              showMenuItems: this.showMenuItems,\n              coverCamera: this.coverCamera,\n              showMoreInfo: this.showMoreInfo,\n              reloadimage: this.reloadimageJPG,\n              adjustPanoramic: this.adjustPanoramic\n            }, video.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 16\n            }, this));\n          } else {\n            // if not, the component <NotFound> is displayed\n            videos = /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"loading connection_error\",\n                src: noCameaSrc,\n                alt: \"No Camera Available\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message_connection_error\",\n                children: \"No cameras available\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 22\n            }, this);\n          }\n        }\n\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container-cameras-box\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rep_prub_cont overflow_scroll\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => {\n                this.closeWarningDelete();\n              },\n              className: \"block-area-for-warning-delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 13\n            }, this), context.connectionError ? /*#__PURE__*/_jsxDEV(ConnectionError, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 43\n            }, this) : context.apiRestConnectioError ? /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"loading connection_error\",\n                src: apiNotResponding,\n                alt: \"loading\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 52\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message_connection_error api_error\",\n                children: \"APi REST server is not responding...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 134\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 49\n            }, this) : context.loading ? /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"loading connection_error\",\n              src: loadingSrc,\n              alt: \"loading\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 35\n            }, this) : videos]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ContainerVideo;","map":{"version":3,"sources":["C:/Users/dgonzalez/Documents/Instalaci√≥n conectada/web-cameras/app-cameras-react-b/src/components/ContainerVideo.js"],"names":["React","Component","Consumer","$","noCameaSrc","apiNotResponding","Videos","ConnectionError","ContainerVideo","constructor","warningDelete","id","fadeIn","closeWarningDelete","fadeOut","showMenuItems","toggle","toggleClass","coverCamera","hasClass","showMoreInfo","adjustPanoramic","imgHTML","i","length","url","eq","attr","img","Image","difference","src","onload","width","height","e","closest","addClass","removeClass","reloadimageJPG","count","imgTag","d","Date","setInterval","slice","indexOf","getTime","state","countVideos","componentDidMount","render","context","sortJSON","data","key","orden","sort","a","b","x","y","videos","result","idCam","undefined","map","video","connectionError","apiRestConnectioError","loading","loadingSrc"],"mappings":"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","sourcesContent":["import React, { Component }   from 'react';\nimport { Consumer }           from './context';\nimport * as $                 from 'jquery';\n\nimport noCameaSrc             from '../img/noCamera.png';\nimport loadingSrc             from '../img/loading.svg';\nimport apiNotResponding       from '../img/apiNotResponding.png';\n// import deleteIcon          from '../img/delete.png';\n\n\nimport Videos                 from './Videos';\nimport ConnectionError        from './ConnectionError';\n\nclass ContainerVideo extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      countVideos: 0\n      // mapTestId: [\n      //             {id:'1', cameraType:\"static\", url:\"https://atmosportal.gtc.iac.es/webcams/camaraAllSky.jpg\", order: 1},\n      //             {id:'2', cameraType:\"static\", url:\"https://atmosportal.gtc.iac.es/img/lastskycam.jpg\", order: 2},\n      //             {id:'3', cameraType:\"static\", url:\"https://atmosportal.gtc.iac.es/img/lastzenithcam.jpg\", order: 3},\n      //             {id:'4', cameraType:\"static\", url:\"https://atmosportal.gtc.iac.es/webcams/pasillo.jpg\", order: 5},\n      //           ]\n    };\n  }\n\n    warningDelete = (id) =>{\n      $('.warning-delete' + id).fadeIn(100);\n      $('.block-area-for-warning-delete').fadeIn(100);\n    }\n    closeWarningDelete = (id) =>{\n      if (id) {\n        $('.warning-delete' + id).fadeOut(100);\n        $('.block-area-for-warning-delete').fadeOut(100);\n      }\n      else {\n        $('.warning-delete').fadeOut(100);\n        $('.block-area-for-warning-delete').fadeOut(100);\n      }\n    }\n\n\n    showMenuItems = (id) =>{\n      $('.menuCameraItem' + id).toggle();\n      $('.menuVideoCameraButton' + id).toggleClass('border-bottom-left-radius-0 border-top-left-radius-0');\n      $('.cameraButtons' + id).toggleClass('opacity-on-Move-right');\n    }\n\n    coverCamera = (id) =>{\n      $('.rep_prub').toggle();\n      $('.coverCameraButtonIcon').toggleClass('cover-rotate-when-clicked');\n      $('.rep_prub' + id).toggleClass('displayBlock width-height-1');\n      if ($(\".pnc\" + id).hasClass(\"panoramic\")) {\n        $('.rep_prub' + id).toggleClass('adjust-panoramic');\n      }\n      if ($(\".pncHa\" + id).hasClass(\"panoramic\")) {\n        $('.rep_prub' + id).toggleClass('adjust-panoramic-medium');\n      }\n    }\n\n    showMoreInfo = (id) =>{\n      $('.rep_prub-info' + id).toggleClass('show-rep_prub-info');\n    }\n\n\n    adjustPanoramic = () => {\n      var imgHTML = $(\".video_streamJPG\");\n      for (var i = 0; i < imgHTML.length; i++) {\n        var url = imgHTML.eq(i).attr(\"src\");\n\n        var img = new Image();\n        var difference = 0;\n\n        img.src = url;\n        img.onload = function() {\n          difference = this.width - this.height;\n\n          if (difference > 300) {\n            var e = i - 1;\n            // console.log(\"i: \" + e + \" html: \" + imgHTML.eq(e).attr(\"src\"));\n            imgHTML.eq(e).closest(\".rep_prub\").addClass(\"adjust-panoramic\");\n            $('.rep_prub').addClass('width-height-7')\n                          .removeClass('width-height-1 width-height-2 width-height-3 width-height-5');\n          }\n        }\n      }\n    }\n\n    componentDidMount() {\n      this.reloadimageJPG();\n\n    }\n\n    reloadimageJPG = () => {\n      var count = 0;\n      var imgTag = $(\".video_streamJPG\");\n      var d = new Date();\n\n      setInterval(function(){\n\n        if (count === 5) {\n          for (var i = 0; i < imgTag.length; i++) {\n            var url = imgTag.eq(i).attr(\"src\");\n            url = url.slice( 0, url.indexOf('?') );\n            imgTag.eq(i).attr(\"src\", url);\n          }\n          count = 0\n        }\n        else {\n          for (var i = 0; i < imgTag.length; i++) {\n            var url = imgTag.eq(i).attr(\"src\");\n            imgTag.eq(i).attr(\"src\", url + \"?\" + d.getTime());\n          }\n          count += 1;\n        }\n\n      }, 60000);\n    }\n\n\n  render(){\n    return (\n      <Consumer>\n      { context => {\n\n        function sortJSON(data, key, orden) {\n          return data.sort(function (a, b) {\n              var x = a[key],\n              y = b[key];\n\n              if (orden === 'asc') {\n                  return ((x < y) ? -1 : ((x > y) ? 1 : 0));\n              }\n\n              if (orden === 'desc') {\n                  return ((x > y) ? -1 : ((x < y) ? 1 : 0));\n              }\n          });\n        }\n\n        let videos;\n        const result = context.idCam; //we save the data in the result variable\n        // const resultStatic = context.staticIdCam;\n        // const result = this.state.mapTestId;\n\n        sortJSON(result, 'order', 'asc');\n\n\n        if (result === undefined){\n\n          videos = <ConnectionError />;\n\n        }else{\n\n          if (result.length > 0) { // if the results found are greater than 0 the images are displayed\n            videos = result.map(video =>\n               <Videos\n                key                = { video.id }\n                name               = { video }\n                warningDelete      = { this.warningDelete }\n                closeWaringDelete  = { this.closeWarningDelete }\n                showMenuItems      = { this.showMenuItems }\n                coverCamera        = { this.coverCamera }\n                showMoreInfo       = { this.showMoreInfo }\n                reloadimage        = { this.reloadimageJPG }\n                adjustPanoramic    = { this.adjustPanoramic }\n                />\n            );\n\n          }\n          else  { // if not, the component <NotFound> is displayed\n            videos = <div>\n                      <img className=\"loading connection_error\" src={ noCameaSrc } alt=\"No Camera Available\" />\n                      <span className=\"message_connection_error\">No cameras available</span>\n                    </div>;\n          }\n        }\n\n        return(\n          <div className=\"container-cameras-box\">\n            <div className=\"rep_prub_cont overflow_scroll\">\n            <div onClick={() => {this.closeWarningDelete()}} className=\"block-area-for-warning-delete\"></div>\n\n            { (context.connectionError) ? <ConnectionError /> :\n              (context.apiRestConnectioError) ? <p><img className=\"loading connection_error\" src={ apiNotResponding } alt=\"loading\"/><span className=\"message_connection_error api_error\">APi REST server is not responding...</span></p> :\n              (context.loading) ? <img className=\"loading connection_error\" src={ loadingSrc } alt=\"loading\"/> : videos }\n\n            </div>\n          </div>\n        );\n      }}\n      </Consumer>\n    );\n  }\n}\n\n\nexport default ContainerVideo;\n"]},"metadata":{},"sourceType":"module"}