{"ast":null,"code":"/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar transform = require('sdp-transform');\n\nexports.write = function (session, opts) {\n  if (typeof session !== 'undefined' && typeof session.media !== 'undefined' && Array.isArray(session.media)) {\n    session.media.forEach(function (mLine) {\n      // expand sources to ssrcs\n      if (typeof mLine.sources !== 'undefined' && Object.keys(mLine.sources).length !== 0) {\n        mLine.ssrcs = [];\n        Object.keys(mLine.sources).forEach(function (ssrc) {\n          var source = mLine.sources[ssrc];\n          Object.keys(source).forEach(function (attribute) {\n            mLine.ssrcs.push({\n              id: ssrc,\n              attribute: attribute,\n              value: source[attribute]\n            });\n          });\n        });\n        delete mLine.sources;\n      } // join ssrcs in ssrc groups\n\n\n      if (typeof mLine.ssrcGroups !== 'undefined' && Array.isArray(mLine.ssrcGroups)) {\n        mLine.ssrcGroups.forEach(function (ssrcGroup) {\n          if (typeof ssrcGroup.ssrcs !== 'undefined' && Array.isArray(ssrcGroup.ssrcs)) {\n            ssrcGroup.ssrcs = ssrcGroup.ssrcs.join(' ');\n          }\n        });\n      }\n    });\n  } // join group mids\n\n\n  if (typeof session !== 'undefined' && typeof session.groups !== 'undefined' && Array.isArray(session.groups)) {\n    session.groups.forEach(function (g) {\n      if (typeof g.mids !== 'undefined' && Array.isArray(g.mids)) {\n        g.mids = g.mids.join(' ');\n      }\n    });\n  }\n\n  return transform.write(session, opts);\n};\n\nexports.parse = function (sdp) {\n  var session = transform.parse(sdp);\n\n  if (typeof session !== 'undefined' && typeof session.media !== 'undefined' && Array.isArray(session.media)) {\n    session.media.forEach(function (mLine) {\n      // group sources attributes by ssrc\n      if (typeof mLine.ssrcs !== 'undefined' && Array.isArray(mLine.ssrcs)) {\n        mLine.sources = {};\n        mLine.ssrcs.forEach(function (ssrc) {\n          if (!mLine.sources[ssrc.id]) mLine.sources[ssrc.id] = {};\n          mLine.sources[ssrc.id][ssrc.attribute] = ssrc.value;\n        });\n        delete mLine.ssrcs;\n      } // split ssrcs in ssrc groups\n\n\n      if (typeof mLine.ssrcGroups !== 'undefined' && Array.isArray(mLine.ssrcGroups)) {\n        mLine.ssrcGroups.forEach(function (ssrcGroup) {\n          if (typeof ssrcGroup.ssrcs === 'string') {\n            ssrcGroup.ssrcs = ssrcGroup.ssrcs.split(' ');\n          }\n        });\n      }\n    });\n  } // split group mids\n\n\n  if (typeof session !== 'undefined' && typeof session.groups !== 'undefined' && Array.isArray(session.groups)) {\n    session.groups.forEach(function (g) {\n      if (typeof g.mids === 'string') {\n        g.mids = g.mids.split(' ');\n      }\n    });\n  }\n\n  return session;\n};","map":{"version":3,"sources":["C:/Users/dgonzalez/Documents/Instalaci√≥n conectada/web-cameras/app-cameras-react-b/node_modules/sdp-translator/lib/transform.js"],"names":["transform","require","exports","write","session","opts","media","Array","isArray","forEach","mLine","sources","Object","keys","length","ssrcs","ssrc","source","attribute","push","id","value","ssrcGroups","ssrcGroup","join","groups","g","mids","parse","sdp","split"],"mappings":"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","sourcesContent":["/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar transform = require('sdp-transform');\n\nexports.write = function(session, opts) {\n\n  if (typeof session !== 'undefined' &&\n      typeof session.media !== 'undefined' &&\n      Array.isArray(session.media)) {\n\n    session.media.forEach(function (mLine) {\n      // expand sources to ssrcs\n      if (typeof mLine.sources !== 'undefined' &&\n        Object.keys(mLine.sources).length !== 0) {\n          mLine.ssrcs = [];\n          Object.keys(mLine.sources).forEach(function (ssrc) {\n            var source = mLine.sources[ssrc];\n            Object.keys(source).forEach(function (attribute) {\n              mLine.ssrcs.push({\n                id: ssrc,\n                attribute: attribute,\n                value: source[attribute]\n              });\n            });\n          });\n          delete mLine.sources;\n        }\n\n      // join ssrcs in ssrc groups\n      if (typeof mLine.ssrcGroups !== 'undefined' &&\n        Array.isArray(mLine.ssrcGroups)) {\n          mLine.ssrcGroups.forEach(function (ssrcGroup) {\n            if (typeof ssrcGroup.ssrcs !== 'undefined' &&\n                Array.isArray(ssrcGroup.ssrcs)) {\n              ssrcGroup.ssrcs = ssrcGroup.ssrcs.join(' ');\n            }\n          });\n        }\n    });\n  }\n\n  // join group mids\n  if (typeof session !== 'undefined' &&\n      typeof session.groups !== 'undefined' && Array.isArray(session.groups)) {\n\n    session.groups.forEach(function (g) {\n      if (typeof g.mids !== 'undefined' && Array.isArray(g.mids)) {\n        g.mids = g.mids.join(' ');\n      }\n    });\n  }\n\n  return transform.write(session, opts);\n};\n\nexports.parse = function(sdp) {\n  var session = transform.parse(sdp);\n\n  if (typeof session !== 'undefined' && typeof session.media !== 'undefined' &&\n      Array.isArray(session.media)) {\n\n    session.media.forEach(function (mLine) {\n      // group sources attributes by ssrc\n      if (typeof mLine.ssrcs !== 'undefined' && Array.isArray(mLine.ssrcs)) {\n        mLine.sources = {};\n        mLine.ssrcs.forEach(function (ssrc) {\n          if (!mLine.sources[ssrc.id])\n          mLine.sources[ssrc.id] = {};\n        mLine.sources[ssrc.id][ssrc.attribute] = ssrc.value;\n        });\n\n        delete mLine.ssrcs;\n      }\n\n      // split ssrcs in ssrc groups\n      if (typeof mLine.ssrcGroups !== 'undefined' &&\n        Array.isArray(mLine.ssrcGroups)) {\n          mLine.ssrcGroups.forEach(function (ssrcGroup) {\n            if (typeof ssrcGroup.ssrcs === 'string') {\n              ssrcGroup.ssrcs = ssrcGroup.ssrcs.split(' ');\n            }\n          });\n        }\n    });\n  }\n  // split group mids\n  if (typeof session !== 'undefined' &&\n      typeof session.groups !== 'undefined' && Array.isArray(session.groups)) {\n\n    session.groups.forEach(function (g) {\n      if (typeof g.mids === 'string') {\n        g.mids = g.mids.split(' ');\n      }\n    });\n  }\n\n  return session;\n};\n\n"]},"metadata":{},"sourceType":"script"}